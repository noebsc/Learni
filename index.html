<html lang="fr"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learni STI2D - Assistant r√©vision BAC 2025</title>
    <meta name="description" content="Assistant intelligent pour r√©viser le BAC STI2D 2025. Quiz, IA, fiches, suivi de progression.">
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2f80ed">
    <link rel="icon" href="data:image/svg+xml,&lt;svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'&gt;&lt;text y='.9em' font-size='90'&gt;üéì&lt;/text&gt;&lt;/svg&gt;">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles-ameliore.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&amp;display=swap" rel="stylesheet">
</head>
<body class="theme-dark" data-new-gr-c-s-check-loaded="14.1252.0" data-gr-ext-installed="">
    
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">üéì</div>
            <h2>Learni STI2D</h2>
            <p>Chargement de votre assistant r√©vision...</p>
            <div class="loading-spinner"></div>
        </div>
    </div>

    <!-- Auth Section -->
    <div id="authSection" class="auth-section hidden">
        <div class="auth-container">
            <div class="auth-header">
                <h1>üéì Learni STI2D</h1>
                <p class="auth-subtitle">Votre assistant intelligent pour r√©ussir le BAC STI2D 2025</p>
            </div>
            
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Connexion</button>
                <button class="auth-tab" data-tab="signup">Inscription</button>
            </div>
            
            <!-- Login Form -->
            <form id="loginForm" class="auth-form active">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required="" placeholder="votre@email.fr">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Mot de passe</label>
                    <input type="password" id="loginPassword" required="" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button type="submit" class="auth-btn" id="loginBtn">Se connecter</button>
            </form>
            
            <!-- Signup Form -->
            <form id="signupForm" class="auth-form">
                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" required="" placeholder="votre@email.fr">
                </div>
                <div class="form-group">
                    <label for="signupPassword">Mot de passe</label>
                    <input type="password" id="signupPassword" required="" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6">
                </div>
                <div class="form-group">
                    <label for="signupSpecialty">Sp√©cialit√© STI2D</label>
                    <select id="signupSpecialty" required="">
                        <option value="">Choisir votre sp√©cialit√©</option>
                        <option value="AC">Architecture et Construction (AC)</option>
                        <option value="ITEC">Innovation Technologique et √âco-Conception (ITEC)</option>
                        <option value="EE">√ânergies et Environnement (EE)</option>
                        <option value="SIN">Syst√®mes d'Information et Num√©rique (SIN)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="signupLV1">LV1</label>
                    <select id="signupLV1" required="">
                        <option value="">Choisir LV1</option>
                        <option value="Anglais">Anglais</option>
                        <option value="Allemand">Allemand</option>
                        <option value="Espagnol">Espagnol</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="signupLV2">LV2 (optionnel)</label>
                    <select id="signupLV2">
                        <option value="">Choisir LV2 (optionnel)</option>
                        <option value="Allemand">Allemand</option>
                        <option value="Espagnol">Espagnol</option>
                        <option value="Italien">Italien</option>
                        <option value="Arabe">Arabe</option>
                    </select>
                </div>
                <button type="submit" class="auth-btn" id="signupBtn">Cr√©er mon compte</button>
            </form>
            
            <!-- Features -->
            <div class="auth-features">
                <h3>Fonctionnalit√©s</h3>
                <div class="features-grid">
                    <div class="feature">
                        <div class="feature-icon">üìö</div>
                        <div class="feature-text">Quiz sur mesure</div>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">ü§ñ</div>
                        <div class="feature-text">Learni AI</div>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">üìä</div>
                        <div class="feature-text">Suivi progression</div>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">üéØ</div>
                        <div class="feature-text">Programme 2025</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- App Content -->
    <div id="appContent" class="hidden">
        <!-- Header -->
        <header class="main-header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo">üéì Learni</div>
                    <div class="logo-subtitle">STI2D 2025</div>
                </div>
                
                <nav class="main-nav">
                    <button class="nav-btn active" data-section="dashboard">
                        <span class="nav-icon">üéØ</span>
                        <span class="nav-text">Tableau de bord</span>
                    </button>
                    <button class="nav-btn" data-section="quiz-select">
                        <span class="nav-icon">üìö</span>
                        <span class="nav-text">Quiz</span>
                    </button>
                    <button class="nav-btn" data-section="quiz-ai">
                        <span class="nav-icon">ü§ñ</span>
                        <span class="nav-text">IA Gemini</span>
                    </button>
                    <button class="nav-btn" data-section="fiches">
                        <span class="nav-icon">üìñ</span>
                        <span class="nav-text">Fiches</span>
                    </button>
                    <button class="nav-btn" data-section="history">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Historique</span>
                    </button>
            <!-- Concentration -->
            <section id="concentration" class="section hidden">
                <h2>üßò‚Äç‚ôÇÔ∏è Espace Concentration</h2>
                <div class="concentration-tabs">
                    <button class="concentration-tab active" data-tab="settings">Param√®tres</button>
                    <button class="concentration-tab" data-tab="music">Musique</button>
                    <button class="concentration-tab" data-tab="animations">Animations</button>
                </div>
                <div class="concentration-tab-content" id="concentration-settings">
                    <h3>Param√®tres</h3>
                    <p>Personnalisez votre espace de concentration. (Plus d'options √† venir)</p>
                </div>
                <div class="concentration-tab-content hidden" id="concentration-music">
                    <h3>Musique de concentration</h3>
                    <div id="music-list">
                        <!-- Musiques libres √† venir -->
                    </div>
                    <audio id="music-player" controls style="width:100%;margin-top:1em;display:none;"></audio>
                </div>
                <div class="concentration-tab-content hidden" id="concentration-animations">
                    <h3>Th√®mes &amp; Animations immersives</h3>
                    <div class="theme-list" id="theme-list">
                        <!-- Th√®mes dynamiques √† venir -->
                    </div>
                </div>
            </section>
                </nav>
                
                <div class="header-actions">
                    <button class="settings-grey" id="settingsBtn" title="Ouvrir les param√®tres" style="display:flex;align-items:center;gap:0.5em;">
                        <span class="settings-icon">‚öôÔ∏è</span>
                        <span style="font-weight:500;">Param√®tres</span>
                    </button>
                    <button class="logout-btn" id="logoutBtn">üö™ D√©connexion</button>
                </div>
        <!-- Modal Param√®tres -->
        <div id="settingsModal" class="modal hidden">
            <div class="modal-content settings-modal-content">
                <span class="modal-close" id="closeSettingsModal">&times;</span>
                <h2><span class="settings-icon">‚öôÔ∏è</span> Param√®tres du compte</h2>
                <div class="settings-block">
                    <h3>Th√®me du site</h3>
                    <button class="theme-btn" id="themeSwitcher">üåô Changer de th√®me</button>
                </div>
                <div class="settings-block">
                    <h3>Changer de mot de passe</h3>
                    <form id="changePasswordForm" class="settings-form">
                        <div class="form-group">
                            <label for="currentPassword">Mot de passe actuel</label>
                            <input type="password" id="currentPassword" required placeholder="Mot de passe actuel">
                        </div>
                        <div class="form-group">
                            <label for="newPassword">Nouveau mot de passe</label>
                            <input type="password" id="newPassword" required minlength="6" placeholder="Nouveau mot de passe">
                        </div>
                        <button type="submit" class="quiz-btn primary">Changer le mot de passe</button>
                    </form>
                </div>
                <div class="settings-block">
                    <h3>Options du compte</h3>
                    <form id="userOptionsForm" class="settings-form">
                        <div class="form-group">
                            <label for="optionLang">Langue</label>
                            <select id="optionLang" class="form-control">
                                <option value="fr">Fran√ßais</option>
                                <option value="en">English</option>
                                <option value="es">Espa√±ol</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="optionSpecialty">Sp√©cialit√© STI2D</label>
                            <select id="optionSpecialty" class="form-control">
                                <option value="">Non renseign√©e</option>
                                <option value="AC">Architecture et Construction (AC)</option>
                                <option value="ITEC">Innovation Technologique et √âco-Conception (ITEC)</option>
                                <option value="EE">√ânergies et Environnement (EE)</option>
                                <option value="SIN">Syst√®mes d'Information et Num√©rique (SIN)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="optionLV1">LV1</label>
                            <select id="optionLV1" class="form-control">
                                <option value="">Non renseign√©e</option>
                                <option value="Anglais">Anglais</option>
                                <option value="Allemand">Allemand</option>
                                <option value="Espagnol">Espagnol</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="optionLV2">LV2 (optionnel)</label>
                            <select id="optionLV2" class="form-control">
                                <option value="">Non renseign√©e</option>
                                <option value="Allemand">Allemand</option>
                                <option value="Espagnol">Espagnol</option>
                                <option value="Italien">Italien</option>
                                <option value="Arabe">Arabe</option>
                            </select>
                        </div>
                        <button type="submit" class="quiz-btn primary">Enregistrer les options</button>
                    </form>
                </div>
                <div class="settings-block">
                    <h3>Transparence des donn√©es</h3>
                    <button id="showUserDataBtn" class="quiz-btn secondary">Voir toutes mes donn√©es</button>
                </div>
                <div class="settings-block danger-zone">
                    <h3>Zone dangereuse</h3>
                    <button id="showDeleteAccountBtn" class="quiz-btn danger">Demander la suppression de mes donn√©es</button>
                </div>
            </div>
        </div>

        <!-- Modal de confirmation de suppression -->
        <div id="deleteAccountModal" class="modal hidden">
            <div class="modal-content delete-account-modal-content">
                <button type="button" class="modal-close" id="closeDeleteAccountModal" aria-label="Fermer">√ó</button>
                <div class="delete-account-content">
                    <h2><span style="color: #dc3545;">‚ö†Ô∏è</span> Suppression du compte</h2>
                    <div class="delete-account-warning">
                        <p>Vous √™tes sur le point de supprimer votre compte et toutes vos donn√©es. Cette action est irr√©versible.</p>
                        <div class="warning-details">
                            <p><strong>Cette action va supprimer :</strong></p>
                            <ul>
                                <li>Votre compte utilisateur</li>
                                <li>Tout votre historique de quiz</li>
                                <li>Vos param√®tres personnalis√©s</li>
                                <li>Toutes vos donn√©es personnelles</li>
                            </ul>
                        </div>
                        <div class="final-warning">
                            <p>‚ö†Ô∏è Cette action ne peut pas √™tre annul√©e.</p>
                        </div>
                    </div>
                    <div class="delete-actions">
                        <button id="cancelDeleteAccountBtn" class="quiz-btn secondary">Annuler</button>
                        <button id="confirmDeleteAccountBtn" class="quiz-btn danger">Confirmer la suppression</button>
                    </div>
                </div>
            </div>
        </div>

            <!-- Modal donn√©es utilisateur moderne -->
            <div id="userDataModal" class="modal hidden">
                <div class="modal-content user-data-modal-content">
                    <span class="modal-close" id="closeUserDataModal">&times;</span>
                    <h2 style="display:flex;align-items:center;gap:0.5em;"><span>üì¶</span> Mes donn√©es personnelles</h2>
                    <div id="userDataList" class="user-data-list">
                        <!-- Donn√©es utilisateur format√©es ici -->
                    </div>
                </div>
            </div>
            </div>
        </header>
            <!-- Concentration -->
            <section id="concentration" class="section hidden">
                <h2>üßò‚Äç‚ôÇÔ∏è Espace Concentration</h2>
                <div class="concentration-tabs">
                    <button class="concentration-tab active" data-tab="settings">Param√®tres</button>
                    <button class="concentration-tab" data-tab="music">Musique</button>
                    <button class="concentration-tab" data-tab="animations">Animations</button>
                </div>
                <div class="concentration-tab-content" id="concentration-settings">
                    <h3>Param√®tres</h3>
                    <p>Personnalisez votre espace de concentration. (Plus d'options √† venir)</p>
                </div>
                <div class="concentration-tab-content hidden" id="concentration-music">
                    <h3>Musique de concentration</h3>
                    <div id="music-list">
                        <!-- Musiques libres √† venir -->
                    </div>
                    <audio id="music-player" controls style="width:100%;margin-top:1em;display:none;"></audio>
                </div>
                <div class="concentration-tab-content hidden" id="concentration-animations">
                    <h3>Th√®mes &amp; Animations immersives</h3>
                    <div class="theme-list" id="theme-list">
                        <!-- Th√®mes dynamiques √† venir -->
                    </div>
                </div>
            </section>
        <!-- Main Content -->
        <main class="main-content">
            
            <!-- Dashboard -->
            <section id="dashboard" class="section">
                <div class="dashboard-header">
                    <h2>üéØ Tableau de bord</h2>
                    <div class="user-info">
                        <div class="user-email" id="userEmail">utilisateur@example.com</div>
                        <div class="user-config">
                            <span class="specialty" id="userSpecialty">Sp√©cialit√©</span>
                            <span class="lv1" id="userLV1">LV1</span>
                            <span class="lv2" id="userLV2">LV2</span>
                        </div>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-content">
                            <h3 id="stat-total-quizzes">0</h3>
                            <p>Quiz compl√©t√©s</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-content">
                            <h3 id="stat-average-score">0%</h3>
                            <p>Score moyen</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-content">
                            <h3 id="stat-streak">0</h3>
                            <p>S√©rie actuelle</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-content">
                            <h3 id="stat-correct">0</h3>
                            <p>Bonnes r√©ponses</p>
                        </div>
                    </div>
                </div>

                <div class="recent-activity">
                    <h3>Activit√© r√©cente</h3>
                    <div id="recent-activity-list">
                        <p class="no-data">Aucun quiz compl√©t√© pour le moment</p>
                    </div>
                </div>
            </section>

            <!-- Quiz Selection -->
            <section id="quiz-select" class="section hidden">
                <h2>üìö Choisir un quiz</h2>
                <div id="quiz-select-container"></div>
            </section>

            <!-- Fiches -->
            <section id="fiches" class="section hidden">
                <h2>üìñ Fiches de r√©vision</h2>
                <div id="fiches-container">
                    <p>Les fiches de r√©vision seront bient√¥t disponibles...</p>
                </div>
            </section>

            <!-- Quiz IA -->
            <section id="quiz-ai" class="section hidden">
                <div class="ai-header">
                    <h2>ü§ñ Quiz avec Intelligence Artificielle</h2>
                    <p class="ai-description">G√©n√©rez des quiz personnalis√©s gr√¢ce √† l'IA</p>
                </div>
                
                <div class="ai-form">
                    <div class="form-group">
                        <label for="aiSubject">Mati√®re</label>
                        <select id="aiSubject" required="">
                            <option value="">Choisir une mati√®re</option>
                            <option value="Fran√ßais">Fran√ßais</option>
                            <option value="Philosophie">Philosophie</option>
                            <option value="Histoire-G√©ographie">Histoire-G√©ographie</option>
                            <option value="Math√©matiques">Math√©matiques</option>
                            <option value="Physique-Chimie">Physique-Chimie</option>
                            <option value="EMC">EMC</option>
                            <option value="EPS">EPS</option>
                            <option value="Anglais">Anglais</option>
                            <option value="2I2D">Ing√©nierie, Innovation et D√©veloppement Durable</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="aiTheme">Th√®me sp√©cifique</label>
                        <input type="text" id="aiTheme" placeholder="Ex: Les fonctions exponentielles, La po√©sie romantique..." maxlength="100">
                    </div>
                    
                    <div class="form-group">
                        <label for="aiDifficulty">Difficult√©</label>
                        <div class="difficulty-selector">
                            <input type="range" id="aiDifficulty" min="1" max="5" value="3">
                            <div class="difficulty-labels">
                                <span>Facile</span>
                                <span>Moyen</span>
                                <span>Difficile</span>
                            </div>
                            <div class="difficulty-display" id="difficultyDisplay">Difficult√©: Moyen</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="aiQuestionCount">Nombre de questions</label>
                        <select id="aiQuestionCount">
                            <option value="5">5 questions</option>
                            <option value="10" selected="">10 questions</option>
                            <option value="15">15 questions</option>
                            <option value="20">20 questions</option>
                        </select>
                    </div>
                    
                    <button class="generate-btn" id="generateQuizBtn">ü§ñ G√©n√©rer le quiz</button>
                </div>
                
                <!-- Loading Animation -->
                <div id="aiLoadingContainer" class="loading-container hidden">
                    <div class="loading-animation">
                        <div class="loading-spinner"></div>
                        <p>G√©n√©ration en cours...</p>
                        <small>L'IA cr√©e votre quiz personnalis√©</small>
                    </div>
                </div>
                
                <!-- Quiz Display -->
                <div id="aiQuizDisplay" class="quiz-display hidden"></div>
            </section>

            <!-- History -->
            <section id="history" class="section hidden">
                <h2>üìä Historique des r√©sultats</h2>
                <div id="history-container">
                    <div class="history-stats">
                        <div class="stat-summary">
                            <h3>R√©sum√© global</h3>
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <span class="stat-value" id="history-total">0</span>
                                    <span class="stat-label">Quiz totaux</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value" id="history-average">0%</span>
                                    <span class="stat-label">Moyenne</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value" id="history-best">0%</span>
                                    <span class="stat-label">Meilleur score</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="history-list">
                        <h3>Historique d√©taill√©</h3>
                        <div id="history-items">
                            <p class="no-data">Aucun quiz compl√©t√© pour le moment</p>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- Quiz Modal -->
    <div id="quizModal" class="quiz-modal hidden">
        <div class="quiz-modal-content">
            <div class="quiz-modal-header">
                <h3 id="quizModalTitle">Quiz</h3>
                <button class="quiz-modal-close" id="closeQuizModal">‚úï</button>
            </div>
            <div class="quiz-modal-body" id="quizModalBody">
                <!-- Quiz content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module" src="firebase-ameliore.js"></script>
    
    <!-- Main App -->
    <script type="module" src="app-ameliore.js"></script>

    <!-- Quiz Options Modal -->
    <div id="quizOptionsModal" class="modal hidden">
        <div class="modal-content quiz-options-modal">
            <button id="closeQuizOptionsModal" class="modal-close">√ó</button>
            <h2>Configurer le quiz</h2>
            <p class="quiz-subject-name"></p>
            <div class="quiz-options-buttons">
                <!-- Les boutons seront ajout√©s dynamiquement en JavaScript -->
            </div>
        </div>
    </div>

</body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>
